{% extends 'base.html.twig' %}

{% block title %}Réservations
{% endblock %}

{% block body %}
	<main>
		<section class="hero_reserv text-center d-flex align-items-center justify-content-center container-fluid">
			<h1 class="text-white hero_title text-center">Réservations</h1>
		</section>
		<section class="container">
			<div class="flux">
				<h2 class="text-center text-primary pt-4 pb-2 fs-3 fw-bold">Découverte du Japon avec un Guide Local</h2>
				<p class="text-center fs-5">Profitez d'une expérience immersive en explorant les trésors cachés et les sites incontournables du Japon. Que ce soit pour une journée ou plus, notre guide expert vous accompagnera pour vous offrir une perspective authentique de la culture japonaise, de ses traditions, et de sa cuisine. Laissez-vous surprendre par les richesses de ce magnifique pays, loin des sentiers battus !
				</p>
			</div>
			<div class="container py-5">
				<div
					class="row">
					<!-- Colonne titre -->
					<div class="col-md-4 d-flex flex-column justify-content-center">
						<h3 class="h-style text-center">Laissez-vous inspirer par ces destinations</h3>
						<p class="text-muted text-center">Découvrez des villes magnifiques où chaque voyage devient une expérience unique.</p>
					</div>
					<!-- Colonne images -->
					<div class="col-md-8">
						<div class="row g-3">
							<div class="col-12 col-md-12 col-lg-4 position-relative">
								<img src="{{ asset('assets/images/himeji.jpg') }}" alt="Ville 1" class="img-fluid custom-img shadow">
								<div class="image-title">Himeji</div>
							</div>
							<div class="col-12 col-md-12 col-lg-4 position-relative">
								<img src="{{ asset('assets/images/kyoto.jpg') }}" alt="Ville 2" class="img-fluid custom-img shadow">
								<div class=" image-title">Kyoto</div>
							</div>
							<div class="col-12 col-md-12 col-lg-4 position-relative">
								<img src="{{ asset('assets/images/osaka.jpg') }}" alt="Ville 3" class="img-fluid custom-img shadow">
								<div class="image-title">Osaka</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="container-fluid bg-secondary bg-gradient pb-4">
			<h2 class="text-center text-primary pt-4 pb-2 fs-3 fw-bold">Des lieux inoubliables vous attendent</h2>
			<p class="text-center">Nos guides partagent ici les plus beaux aperçus de leurs périples au Japon.</p>
			<div class="container">
				{% include '_partials/_insta_carousel.html.twig' %}
			</div>
		</section>
		<div class="container my-5">
		<h2 class="mb-4 text-center text-primary">Vivez le Japon à votre rythme, selon vos envies</h2>
  <div class="row g-4">
    <!-- Grand cadre vertical -->
    <div class="col-12 col-md-4">
      <div class="h-100 p-4 bg-primary text-white rounded shadow">
        <h3>Un accompagnement 100% sur-mesure</h3>
        <p>
          Votre guide élabore chaque parcours selon vos envies, vos centres d’intérêt et votre rythme.
        </p>
      </div>
    </div>
    <!-- Cadres horizontaux à droite du grand cadre -->
    <div class="col-12 col-md-8">
      <div class="row g-4">
        <div class="col-12 col-lg-6">
          <div class="h-100 p-3 bg-light border rounded">
            <h5 class="mb-2">Découvertes exclusives</h5>
            <p>Explorez des lieux insolites et des bonnes adresses introuvables dans les guides classiques.</p>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="h-100 p-3 bg-light border rounded">
            <h5 class="mb-2">Simplicité & confort</h5>
            <p>Votre guide vient vous chercher et s’adapte à vos horaires pour un voyage sans stress.</p>
          </div>
        </div>
        <div class="col-12 col-lg-6 mt-4">
          <div class="h-100 p-3 bg-light border rounded">
            <h5 class="mb-2">Visite privée</h5>
            <p>Partagez l’expérience uniquement avec vos proches, pour plus d’intimité et de personnalisation.</p>
          </div>
        </div>
        <div class="col-12 col-lg-6 mt-4">
          <div class="h-100 p-3 bg-light border rounded">
            <h5 class="mb-2">Conseils de passionnés</h5>
            <p>Profitez des recommandations de locaux amoureux du Japon, avant, pendant et après la visite.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
		<section class="container-fluid bg-secondary bg-gradient">
			<h2 class="text-center">Votre voyage personnalisé commence ici</h2>
			<div class="row">
				<div class="col-lg-6">
					<div></div>
				</div>
				<div class="col-lg-6">
					<p>Etapes de réservation</p>
				</div>
			</div>
		</section>
		{% for reservationData in reservationsWithRatings %}
			<div class="container mt-5 col-lg-6 col-md-6 col-sm-10">
				<div class="card shadow-lg card-guide">
					<a href="{{ path('app_reservations_details', {id: reservationData.reservation.id}) }}" target="_blank">
						<div class="card-body">
							<div class="row mb-2 border-bottom pb-2">
								<div class="col-lg-4">
									<strong>Date :</strong>
									{{ reservationData.reservation.day.format('d/m/Y') }}
								</div>
								<div class="col-lg-4">
									<strong>Départ :</strong>
									{% if reservationData.reservation.begin is not null %}
										<span>{{ reservationData.reservation.begin|date('H:i') }}</span>
									{% else %}
										<p>Non défini</p>
									{% endif %}
								</div>
								<div class="col-lg-4">
									<strong>Fin :</strong>
									{% if reservationData.reservation.end is not null %}
										<span>{{ reservationData.reservation.end|date('H:i') }}</span>
									{% else %}
										<p>Non défini</p>
									{% endif %}
								</div>
								<div class="col-lg-4">
									<strong>Ville :</strong>
									{{ reservationData.reservation.city.name }}
								</div>
								<div class="col-lg-4">
									<strong>Repas compris :</strong>
									{% if reservationData.reservation.meal %}
										Oui
									{% else %}
										Non
									{% endif %}
								</div>
								<div class="col-lg-4">
									<strong>Place restante(s) :</strong>
									{{ reservationData.reservation.placesDispo }}
								</div>
							</div>
						</div>
						<div class="mb-2 d-flex align-items-center">
							<div class="ms-3">
								<img src="{{ reservationData.reservation.guide.user.picture ? asset('uploads/users/mini/40x40-' ~ reservationData.reservation.guide.user.picture) : asset('assets/images/favicon.png') }}" class="rounded-circle" alt="Photo de profil"/>
							</div>
							<div class="ms-1">
								<strong>{{ reservationData.reservation.guide.user.pseudo }}</strong>
							</div>
							<div class="ms-2">
								<span class="fw-bold me-2" id="guide-note">
									{% if reservationData.averageRating is not null %}
										{{ reservationData.averageRating|number_format(1) }}/5
									{% else %}
										-/5
									{% endif %}
								</span>
							</div>
							<div class="ms-3">
								<strong>Prix :</strong>
								{{ reservationData.reservation.price }}
							</div>
						</div>
					</a>
				</div>
			</div>
		{% endfor %}
	</section>
	<section>
		<h2 class="ms-3 mt-5">Nos guides</h2>
		<div class="container">
			<div class="row">
				{% for user in users %}
					<div class="col-md-4 col-lg-3">
						<div class="card profile-card-3">
							<div class="background-block">
								<img src="https://images.pexels.com/photos/459225/pexels-photo-459225.jpeg?auto=compress&cs=tinysrgb&h=650&w=940" alt="profile-sample1" class="background"/>
							</div>
							<div class="profile-thumb-block">
								<img src="{{ user.picture ? asset('uploads/users/mini/40x40-' ~ user.picture) : asset('assets/images/favicon.png') }}" alt="profile-image" width="50" class="profile"/>
							</div>
							<div class="card-content">
								<h2>{{ user.pseudo }}<small>{{ user.guide.languages }}</small>
								</h3>
								<div class="icon-block">
									<i class="fa-brands fa-instagram"></i>
									<i class="fa-brands fa-x-twitter"></i>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</section>
</main>{% endblock %}
